<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCSI 대리점 정밀 지도</title>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=k8vacdhpym&submodules=geocoder"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #map { width: 100vw; height: 100vh; background-color: #f0f0f0; }
        .label-container {
            background: #fff; border: 2px solid #ff4d4d; border-radius: 5px;
            padding: 2px 6px; font-size: 12px; font-weight: bold; color: #333;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2); white-space: nowrap;
            position: absolute;
            transform: translate(-50%, -100%);
            margin-top: -10px;
            z-index: 1000;
        }
    </style>
</head>
<body>
<div id="map"></div>

<script>
naver.maps.onJSContentLoaded = function() {
    
    if (!naver.maps.Service) {
        alert("Geocoding 서비스가 로드되지 않았습니다. 콘솔 설정을 확인해주세요.");
        return;
    }

    const map = new naver.maps.Map("map", {
        center: new naver.maps.LatLng(37.5665, 126.9780),
        zoom: 11
    });

    // 최신 주소 정보 (41개 모든 매장)
    const stores = [
        {num: 1, name: "울림터대리점 군자역점", address: "서울특별시 광진구 능동로 297"},
        {num: 2, name: "다원대리점 중곡직영점", address: "서울 광진구 긴고랑로 115"},
        {num: 3, name: "광장대리점 중곡점", address: "서울 광진구 면목로 160"},
        {num: 4, name: "울림터대리점 본점", address: "서울 광진구 아차산로 220"},
        {num: 5, name: "광장대리점 구의점", address: "서울 광진구 아차산로 415"},
        {num: 6, name: "울림터대리점 건대이마트점", address: "서울특별시 광진구 아차산로 262"},
        {num: 7, name: "울림터대리점 구의역점", address: "서울 광진구 자양로 93"},
        {num: 8, name: "알파대리점 노원직영점", address: "서울 노원구 노해로 490"},
        {num: 9, name: "신창대리점 공릉역점", address: "서울 노원구 동일로 1077"},
        {num: 10, name: "가능대리점 상계직영점", address: "서울 노원구 동일로 1379"},
        {num: 11, name: "PS&M (마들역점)", address: "서울 노원구 동일로 1538"},
        {num: 12, name: "서울ent대리점 공릉직영점", address: "서울 노원구 동일로192길 11"},
        {num: 13, name: "신창대리점 노원역직영점", address: "서울 노원구 상계로 75"},
        {num: 14, name: "알파대리점 석계역점", address: "서울 노원구 석계로 4"},
        {num: 15, name: "신창대리점 광운대점", address: "서울 노원구 석계로 95"},
        {num: 16, name: "ACE대리점 은행사거리점", address: "서울 노원구 한글비석로 254"},
        {num: 17, name: "서울ent대리점 상계역점", address: "서울 노원구 한글비석로 384"},
        {num: 18, name: "상록수대리점 우장산점", address: "서울 강서구 강서로 242"},
        {num: 19, name: "동진대리점 강서중앙점", address: "서울 강서구 강서로 279"},
        {num: 20, name: "동진대리점 까치산역 본점", address: "서울 강서구 강서로 63"},
        {num: 21, name: "참스타대리점 등촌점", address: "서울 강서구 강서로56길"},
        {num: 22, name: "신나는 마곡직영점", address: "서울 강서구 공항대로 168"},
        {num: 23, name: "강서대리점 염창역점", address: "서울 강서구 공항대로 635"},
        {num: 24, name: "동진대리점 마곡본점", address: "서울 강서구 강서로 385"},
        {num: 25, name: "동진대리점 마곡나루점", address: "서울 강서구 마곡중앙로 161-17"},
        {num: 26, name: "참스타대리점 블루나인점", address: "서울 강서구 양천로 583"},
        {num: 27, name: "큰사랑대리점 방화직영점", address: "서울 강서구 양천로 73"},
        {num: 28, name: "PS&M (화곡역점)", address: "서울 강서구 화곡로 161"},
        {num: 29, name: "세하대리점 화곡역본점", address: "서울 강서구 화곡로 190"},
        {num: 30, name: "동진대리점 화곡직영점", address: "서울 강서구 화곡로25길 2"},
        {num: 31, name: "동진대리점 가양역 본점", address: "서울 강서구 화곡로68길 3"},
        {num: 32, name: "PS&M (등촌역점)", address: "서울 양천구 공항대로 564"},
        {num: 33, name: "강서대리점 신월본점", address: "서울 양천구 남부순환로 354"},
        {num: 34, name: "참스타대리점 신월점", address: "서울 양천구 남부순환로 585"},
        {num: 35, name: "유원대리점 목동41타워점", address: "서울 양천구 목동동로 293"},
        {num: 36, name: "한유대리점 목동광장직영점", address: "서울 양천구 목동동로 379"},
        {num: 37, name: "새서울대리점 신정직영점", address: "서울 양천구 목동동로 53"},
        {num: 38, name: "유원대리점 목동본점", address: "서울 양천구 목동서로 63"},
        {num: 39, name: "MD대리점 염창동직영점", address: "서울 양천구 목동중앙본로 126"},
        {num: 40, name: "세하대리점 등촌깨비시장점", address: "서울 양천구 목동중앙북로 29"},
        {num: 41, name: "세하 신정본점", address: "서울 양천구 중앙로 267"}
    ];

    stores.forEach((store) => {
        naver.maps.Service.geocode({ query: store.address }, function(status, response) {
            if (status === naver.maps.Service.Status.OK) {
                const result = response.v2.addresses[0];
                const point = new naver.maps.Point(result.x, result.y);
                const marker = new naver.maps.Marker({ position: point, map: map });
                
                // 라벨을 DOM에 직접 추가
                const labelDiv = document.createElement('div');
                labelDiv.className = 'label-container';
                labelDiv.innerHTML = `${store.num}. ${store.name}`;
                
                const overlay = new naver.maps.OverlayView();
                overlay.setMap(map);
                
                overlay.onAdd = function() {
                    const panes = this.getPanes();
                    panes.overlayLayer.appendChild(labelDiv);
                };
                
                overlay.draw = function() {
                    const projection = this.getProjection();
                    const position = projection.fromCoordToOffset(point);
                    labelDiv.style.left = position.x + 'px';
                    labelDiv.style.top = (position.y - 40) + 'px';
                };
                
                overlay.onRemove = function() {
                    if (labelDiv.parentNode) {
                        labelDiv.parentNode.removeChild(labelDiv);
                    }
                };
            }
        });
    });
};
</script>
</body>
</html>
