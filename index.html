<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCSI 대리점 정밀 지도 (카카오)</title>
    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=79f4eed14157b41600ae24614948061a&libraries=services"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Malgun Gothic', sans-serif; overflow: hidden; }
        #map { width: 100vw; height: 100vh; }
        .custom-label {
            background: #fff;
            border: 2px solid #3b5bdb;
            border-radius: 5px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: bold;
            color: #333;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            white-space: nowrap;
        }
        .loading-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.8); z-index: 1000;
            display: flex; justify-content: center; align-items: center; font-weight: bold;
        }
    </style>
</head>
<body>
<div id="loading" class="loading-overlay">대리점 위치를 계산 중입니다...</div>
<div id="map"></div>

<script>
// 1. 지도 초기화
const container = document.getElementById('map');
const options = {
    center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울 중심
    level: 8
};
const map = new kakao.maps.Map(container, options);
const geocoder = new kakao.maps.services.Geocoder();

// 2. 대리점 데이터 배열
const stores = [
    {num: 1, name: "울림터대리점 군자역점", address: "서울 광진구 군자동 477-19번지"},
    {num: 2, name: "다원대리점 중곡직영점", address: "서울 광진구 긴고랑로 115 (중곡동)"},
    {num: 3, name: "광장대리점 중곡점", address: "서울 광진구 면목로 160, 1동 1호"},
    {num: 4, name: "울림터대리점 본점", address: "서울 광진구 아차산로 220, 1층 (자양동,송천빌딩)"},
    {num: 5, name: "광장대리점 구의점", address: "서울 광진구 아차산로 415 (구의동,장안빌딩)"},
    {num: 6, name: "PS&M (강변역점)", address: "서울 광진구 광나루로56길 85 (구의동,테크노마트)"},
    {num: 7, name: "PS&M (강변역 2호점)", address: "서울 광진구 광나루로56길 85 (구의동,테크노마트) 지하 1층"},
    {num: 8, name: "광장대리점 광장점", address: "서울 광진구 광나루로 590, 1층(구의동)"},
    {num: 9, name: "다원대리점 구의본점", address: "서울 광진구 자양로 116, 1층(구의동)"},
    {num: 10, name: "광장대리점 자양점", address: "서울 광진구 자양로 50, 1층(자양동)"},
    {num: 11, name: "PS&M (건대입구역점)", address: "서울 광진구 아차산로 229 (화양동)"},
    {num: 12, name: "동진대리점 화양점", address: "서울 광진구 아차산로 201, 1층(화양동)"},
    {num: 13, name: "성진대리점 건대점", address: "서울 광진구 동일로20길 113, 1층 101호(화양동)"},
    {num: 14, name: "다원대리점 건대점", address: "서울 광진구 능동로 135-1, 1층(화양동)"},
    {num: 15, name: "PS&M (군자역점)", address: "서울 광진구 천호대로 549 (중곡동)"},
    {num: 16, name: "동진대리점 중곡역점", address: "서울 광진구 능동로 394, 1층(중곡동)"},
    {num: 17, name: "참스타대리점 중곡본점", address: "서울 광진구 능동로 346, 1층(중곡동)"},
    {num: 18, name: "다원대리점 중곡본점", address: "서울 광진구 면목로 151, 1층(중곡동)"},
    {num: 19, name: "울림터대리점 능동점", address: "서울 광진구 천호대로 522, 1층(능동)"},
    {num: 20, name: "PS&M (어린이대공원역점)", address: "서울 광진구 능동로 189, 1층 102호(화양동)"},
    {num: 21, name: "광장대리점 성수점", address: "서울 성동구 아차산로 110, 1층(성수동2가)"},
    {num: 22, name: "PS&M (성수점)", address: "서울 성동구 아차산로 103 (성수동2가) 1층"},
    {num: 23, name: "동진대리점 뚝섬역점", address: "서울 성동구 상원길 15, 1층(성수동1가)"},
    {num: 24, name: "다원대리점 성수본점", address: "서울 성동구 아차산로 51-1, 1층(성수동1가)"},
    {num: 25, name: "PS&M (한양대점)", address: "서울 성동구 사근동길 2, 1층(행당동)"},
    {num: 26, name: "동진대리점 왕십리역점", address: "서울 성동구 왕십리로 321, 1층(행당동)"},
    {num: 27, name: "다원대리점 왕십리점", address: "서울 성동구 왕십리로 323, 1층(행당동)"},
    {num: 28, name: "동진대리점 상왕십리역점", address: "서울 성동구 왕십리로 368, 1층(하왕십리동)"},
    {num: 29, name: "PS&M (화곡역점)", address: "서울 강서구 화곡로 161 (화곡동)"},
    {num: 30, name: "동진대리점 화곡역본점", address: "서울 강서구 화곡로 162, KBH빌딩 1층"},
    {num: 31, name: "동진대리점 가양역 본점", address: "서울 강서구 화곡로68길 3, 1층 107호(등촌동)"},
    {num: 32, name: "PS&M (등촌역점)", address: "서울 양천구 공항대로 564 (목동) 1층"},
    {num: 33, name: "강서대리점 신월본점", address: "서울 양천구 남부순환로 354, 1층 (신월동)"},
    {num: 34, name: "참스타대리점 신월점", address: "서울 양천구 남부순환로 585, 101호(신월동)"},
    {num: 35, name: "동진대리점 신월점", address: "서울 양천구 남부순환로 571, 1층(신월동)"},
    {num: 36, name: "PS&M (신정네거리역점)", address: "서울 양천구 중앙로 250 (신정동) 1층"},
    {num: 37, name: "강서대리점 신정점", address: "서울 양천구 신정로 312, 1층(신정동)"},
    {num: 38, name: "참스타대리점 신정본점", address: "서울 양천구 중앙로 225, 1층(신정동)"},
    {num: 39, name: "동진대리점 목동역점", address: "서울 양천구 오목로 230, 1층(신정동)"},
    {num: 40, name: "PS&M (목동역점)", address: "서울 양천구 오목로 231 (목동) 1층"},
    {num: 41, name: "PS&M (오목교역점)", address: "서울 양천구 오목로 331 (목동) 1층"}
];

let processCount = 0;

// 3. 주소 변환 및 마커 생성 로직
stores.forEach((store) => {
    geocoder.addressSearch(store.address, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
            const coords = new kakao.maps.LatLng(result[0].y, result[0].x);

            // 마커 생성
            const marker = new kakao.maps.Marker({
                map: map,
                position: coords
            });

            // 커스텀 레이블 (이름표)
            const customOverlay = new kakao.maps.CustomOverlay({
                position: coords,
                content: `<div class="custom-label">${store.num}. ${store.name}</div>`,
                yAnchor: 2.6
            });
            customOverlay.setMap(map);

            // 정보창 (클릭 시 주소 표시)
            const infowindow = new kakao.maps.InfoWindow({
                content: `<div style="padding:10px; font-size:12px;"><strong>${store.name}</strong><br>${store.address}</div>`
            });

            kakao.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map, marker);
            });
        }
        
        processCount++;
        if (processCount === stores.length) {
            document.getElementById('loading').style.display = 'none';
        }
    });
});
</script>
</body>
</html>
